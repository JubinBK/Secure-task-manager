{% load static %}
<!DOCTYPE html>
<html class="theme-secure">

<head>
    <title>Secure Task Manager</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>

<body>
    <div class="container">
        <div class="nav-bar">
            <div class="nav-links">
                <span class="tag tag-secure">SECURE MODE</span>
                {% if user.is_authenticated %}
                <a href="{% url 'secure_task_list' %}">Tasks</a>
                <a href="{% url 'secure_profile' %}">Profile</a>
                {% if user.is_superuser %}
                <a href="{% url 'secure_user_list' %}">Edit Users</a>
                {% endif %}
                <form action="{% url 'secure_logout' %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit"
                        style="background:none; border:none; font: inherit; cursor:pointer; color: var(--text-color); font-weight: 500;">Logout</button>
                </form>
                {% else %}
                <a href="{% url 'secure_login' %}">Login</a>
                <a href="{% url 'secure_register' %}">Register</a>
                {% endif %}
                <a href="{% url 'home' %}">Home</a>
            </div>
            {% if user.is_authenticated %}
            <div class="user-info">
                Logged in as: <strong>{{ user.username }}</strong>
            </div>
            {% endif %}
        </div>

        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="alert {% if message.tags == 'error' %}alert-error{% else %}alert-success{% endif %}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% block content %}{% endblock %}
    </div>
</body>

</html>